---
title: 使用腾讯云COS做博客图床和Picgo工具
subtitle: 薅羊毛
date: 2018-06-07
tags: ["运维开发"]
draft: false
---

之前做博客的时候考虑过图片放服务端，不过由于静态文件多了之后难管理、占体积、还吃服务器带宽。所以改为对象云存储，国内主流的有阿里OSS、腾讯COS、七牛云KODO。我这里选择的是腾讯COS（主要是免费）做博客图床。

<!--more-->

## 对象存储
对象存储，叫做基于对象的存储，也就是通常意义的键值存储，其接口就是简单的GET,PUT,DEL和其他扩展。

如果不理解也没关系，使用时理解为一般的网络存储就好。文件是通过URL的方式进行访问。

### 优点
- 云服务商提供了控制台，便于管理
- 不占用自己服务器的磁盘空间
- 提供API支持，应用广泛，不光是做博客图床
- 国内这类存储一般都支持CDN站点加速，访问速度快，不占自己服务器带宽

## 使用
云服务厂商都提供了自己的使用文档和入门视频：[腾讯云文档平台](https://cloud.tencent.com/document/product/436)

这里主要说一下使用时要注意的点：

- 公有读私有写

博客图床属于所有人可以访问，但只能所有者有编辑权限，因此访问权限设置为公有读私有写：
![](https://blog-1253351524.cossh.myqcloud.com/images/20180607210548.png)

- 防盗链

由于对象存储使用URL进行文件的访问，而做博客图床权限设置都为公有可读，如果别人拿了你的图片URL放在自己的网站里，那么流量都是走你的存储，免费的流量瞬间就会用光。因此需要防盗链，编辑白名单只允许自己的站点请求该图片。
![](https://images.moonlightming.top/images/20180607204734.png)

- https

如果自己的网站配置了https，但图片是http，那么浏览器自己会警告，提示含有不安全内容。虽然不影响使用但是有强迫症的完美主义人群怎么能忍。默认支持https，只需将访问URL的http协议修改为https即可。

- CDN

腾讯云每月提供50G免费对象存储流量和10G的CDN加速流量，CDN需要控制台内开启，并且访问的域名是不一样的，需要自己处理替换。比较好的处理方式是使用自定义域名功能，这样无论以后更换对象存储还是切换是否CDN加速都比较方便，不至于修改所有的图片URL。自己首先要注册一个域名，在对象和存储的自定义域名配置，配置后需要在域名解析设置里设置域名→CNAME的解析。
![](https://images.moonlightming.top/images/20180607225919.png)

如果想要使用https，需要在自定义域名的高级配置里配置证书。



云服务商提供了客户端方便使用者在本地进行文件管理，我这里推荐一个第三方开源的图床管理工具：Picgo

## Picgo
github地址：[PicGO](https://github.com/Molunerfinn/PicGo)

一个针对图床上传客户端。优点在于上传完后可以自己生成markdown格式的图片链接，方便写博客使用。支持多种图床。放一些UI图，具体的可以去作者首页查看试用。
![](https://images.moonlightming.top/images/20180607232609.png)
![](https://images.moonlightming.top/images/20180607232838.png)
![](https://images.moonlightming.top/images/20180607232848.png)
